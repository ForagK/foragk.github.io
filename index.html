<!DOCTYPE html>
<HTML>
<HEAD>
  <link rel="stylesheet" href="CSS/style.css">
  <TITLE>лЏла9</TITLE>
</HEAD>
<BODY>
    <div class="background" id="enemy">
      <div class="card">
        <div class="image"></div>
        <div id="enemyName">Enemy</div>
      </div>
      <div class="main">
        <div class="topArea" id="topArea1">
        <img src="images/closed.png" id="enCard1">
        <img src="images/closed.png" id="enCard2">
        <img src="images/closed.png" id="enCard3">
        <img src="images/closed.png" id="enCard4">
        </div>
        <div class="bottomArea" id="bottomArea1">
          <div id="enCardVal">0</div>
          <div id="buttonArea1">
          </div>
        </div>
      </div>
    </div>
    <div class="background" id="player">
      <div class="card">
        <div class="image"></div>
        <div id="playerName"></div>
      </div>
      <div class="main">
        <div class="topArea" id="topArea">
        <img src="images/closed.png" id="plCard1">
        <img src="images/closed.png" id="plCard2">
        <img src="images/closed.png" id="plCard3">
        <img src="images/closed.png" id="plCard4">
        </div>
        <div class="bottomArea" id="bottomArea">
          <div id="plCardVal">0</div>
          <div id="buttonArea">
            <button id="start">Gamble!</button>
          </div>
        </div>
      </div>
    </div>
    <div class="result" id="result"></div>
    <script>
      let name='';
      while(!name){
        name = prompt('Enter name');
        name = name.trim();
      }
      playerName.innerHTML=name;
      let playerCard=0;
      let enemyCard=0;
      let playerWin=0;
      let enemyWin=0;
      start.addEventListener("click",()=>{
        result.style.display="none";
        playerCard=0;
        enemyCard=0;
        plCardVal.innerHTML=playerCard;
        enCardVal.innerHTML=enemyCard;
        document.getElementById("start").disabled = true;
        setTimeout(()=>FlipCard("plCard1","enCard1"),200);
        setTimeout(()=>FlipCard("plCard2","enCard2"),400);
        setTimeout(()=>FlipCard("plCard3","enCard3"),600);
        setTimeout(()=>FlipCard("plCard4","enCard4"),800);
        setTimeout(()=>{
          result.style.display="inherit";
          if(playerCard>enemyCard){
            playerWin++;
            result.innerHTML="You Won!<b>"+playerWin+' : '+enemyWin;
          }
          else{
            enemyWin++;
            result.innerHTML="You Lost(<b>"+playerWin+' : '+enemyWin;
          }
          if(playerWin<3&&enemyWin<3) document.getElementById("start").disabled = false;
        },2800)
        })
        function FlipCard(plCardId,enCardId){
          let enemyRand=Math.floor(Math.random()*9);
          let playerRand=Math.floor(Math.random()*9);
          let enemyVal=0;
          let playerVal=0;
          let plCard = document.getElementById(plCardId);
          let enCard = document.getElementById(enCardId);
          plCard.style.animation = "";
          enCard.style.animation = "";
          plCard.offsetHeight;
          enCard.offsetHeight;
          plCard.style.animation = "flip 2s";
          enCard.style.animation = "flip 2s";
          switch(playerRand){
            case 0:
            setTimeout(() => {
              plCard.setAttribute('src','images/6.png');
            }, 1000);
            playerVal+=6;
            break;
            case 1:
            setTimeout(() => {
              plCard.setAttribute('src','images/7.png');
            }, 1000);
            playerVal+=7;
            break;
            case 2:
            setTimeout(() => {
              plCard.setAttribute('src','images/8.png');
            }, 1000);
            playerVal+=8;
            break;
            case 3:
            setTimeout(() => {
              plCard.setAttribute('src','images/9.png');
            }, 1000);
            playerVal+=9;
            break;
            case 4:
            setTimeout(() => {
              plCard.setAttribute('src','images/10.png');
            }, 1000);
            playerVal+=10;
            break;
            case 5:
            setTimeout(() => {
              plCard.setAttribute('src','images/J.png');
            }, 1000);
            playerVal+=2;
            break;
            case 6:
            setTimeout(() => {
              plCard.setAttribute('src','images/K.png');
            }, 1000);
            playerVal+=4;
            break;
            case 7:
            setTimeout(() => {
              plCard.setAttribute('src','images/Q.png');
            }, 1000);
            playerVal+=3;
            break;
            case 8:
            setTimeout(() => {
              plCard.setAttribute('src','images/A.png');
            }, 1000);
            playerVal+=11;
            break;
          }
          switch(enemyRand){
            case 0:
            setTimeout(() => {
              enCard.setAttribute('src','images/6.png');
            }, 1000);
            enemyVal+=6;
            break;
            case 1:
            setTimeout(() => {
              enCard.setAttribute('src','images/7.png');
            }, 1000);
            enemyVal+=7;
            break;
            case 2:
            setTimeout(() => {
              enCard.setAttribute('src','images/8.png');
            }, 1000);
            enemyVal+=8;
            break;
            case 3:
            setTimeout(() => {
              enCard.setAttribute('src','images/9.png');
            }, 1000);
            enemyVal+=9;
            break;
            case 4:
            setTimeout(() => {
              enCard.setAttribute('src','images/10.png');
            }, 1000);
            enemyVal+=10;
            break;
            case 5:
            setTimeout(() => {
              enCard.setAttribute('src','images/J.png');
            }, 1000);
            enemyVal+=2;
            break;
            case 6:
            setTimeout(() => {
              enCard.setAttribute('src','images/K.png');
            }, 1000);
            enemyVal+=4;
            break;
            case 7:
            setTimeout(() => {
              enCard.setAttribute('src','images/Q.png');
            }, 1000);
            enemyVal+=3;
            break;
            case 8:
            setTimeout(() => {
              enCard.setAttribute('src','images/A.png');
            }, 1000);
            enemyVal+=11;
            break;
          }
          setTimeout(() => {
            enemyCard+=enemyVal;
            playerCard+=playerVal;
            enCardVal.innerHTML=enemyCard;
            plCardVal.innerHTML=playerCard;
            }, 1500);
        }
    </script>
</BODY>
</HTML>